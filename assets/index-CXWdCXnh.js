import{r as j,j as e,B as p,n as y,o as k,L as z,M as h,p as P,u as f,q as u,s as S,C as v}from"./index-DpMi1BbL.js";import{C as I}from"./index-DzEo03I0.js";import{G as m,I as T,T as C,A,b as d,B as w,c as R,R as $,C as B}from"./index-CK0Vr5Af.js";import{S as b}from"./Stack-Be2OvOOU.js";import{u as F}from"./use-form-BLu2z2Au.js";import{T as g}from"./TextInput-Cse_Hy9m.js";function M(t=!1,r){const{onOpen:a,onClose:i}={},[o,c]=j.useState(t),l=j.useCallback(()=>{c(x=>x||(a==null||a(),!0))},[a]),n=j.useCallback(()=>{c(x=>x&&(i==null||i(),!1))},[i]),s=j.useCallback(()=>{o?n():l()},[n,l,o]);return[o,{open:l,close:n,toggle:s}]}const E=({title:t,image:r,increment:a,discont_price:i,price:o,setIncrement:c,setDecrement:l,removeAllProducts:n})=>{const s=r?`${y.BASE_URL}${r}`:void 0;return e.jsx(p,{w:"100%",maw:780,mih:180,style:{overflow:"hidden",border:"1px solid var(--mantine-color-gray-3)",borderRadius:12},children:e.jsxs(m,{w:"100%",wrap:"nowrap",children:[e.jsx(p,{style:{borderRight:"1px solid var(--mantine-color-gray-3)"},children:e.jsx(T,{maw:200,mah:180,src:s})}),e.jsxs(b,{gap:32,p:32,w:"100%",flex:1,children:[e.jsxs(m,{gap:0,justify:"space-between",w:"100%",children:[e.jsx(C,{fz:20,children:t}),e.jsx(A,{onClick:n,ml:"auto",variant:"transparent",c:"black",children:e.jsx(k,{})})]}),e.jsxs(m,{gap:32,children:[e.jsx(I,{increment:a,setIncrement:c,setDecrement:l}),e.jsxs(m,{align:"baseline",children:[e.jsxs(d,{fz:40,lh:1,fw:600,children:["$",i??o]}),e.jsxs(d,{c:"gray",td:"line-through",fz:20,hidden:!i,children:["$",o]})]})]})]})]})})},L=()=>e.jsxs(b,{gap:32,w:"fit-content",children:[e.jsx(d,{fz:20,fw:500,children:"Looks like you have no items in your basket currently."}),e.jsx(w,{w:"fit-content",size:"lg",bg:"green.8",radius:"xs",component:z,to:"/",children:"Continue Shopping"})]}),D=({opened:t,close:r})=>e.jsxs(h.Root,{centered:!0,opened:t,onClose:r,children:[e.jsx(h.Overlay,{}),e.jsxs(h.Content,{children:[e.jsxs(h.Header,{bg:"green.9",c:"white",children:[e.jsx(h.Title,{fw:500,fz:40,children:"Congratulations!"}),e.jsx(h.CloseButton,{c:"white",size:"xl"})]}),e.jsxs(h.Body,{c:"white",bg:"green.9",children:[e.jsx(d,{fz:20,lh:1,fw:500,children:"Your order has been successfully placed on the website."}),e.jsx("br",{}),e.jsx(d,{fz:20,lh:1,fw:500,children:"A manager will contact you shortly to confirm your order."})]})]})]}),q=({count:t,few:r,many:a,one:i,withoutCount:o})=>{const c=Math.round(t)!==t;let l=a;if(c)l=r;else{const n=Math.abs(t%10),s=Math.abs(t%100);n===1&&s!==11?l=i:2<=n&&n<=4&&(s<10||20<=s)&&(l=r)}return o?`${l}`:`${t}Â ${l}`},G=({count:t,total:r})=>e.jsxs(p,{mb:32,children:[e.jsx(C,{mb:24,fz:40,children:"Order details"}),e.jsx(d,{c:"gray",fz:40,fw:500,children:q({count:t,one:"item",few:"items",many:"items"})}),e.jsxs(m,{justify:"space-between",align:"baseline",children:[e.jsx(d,{c:"gray",fz:40,fw:500,children:"Total"}),e.jsxs(d,{fw:700,fz:64,lh:1,children:["$",r.toFixed(2)]})]})]}),O=()=>{const t=P(),r=f(u.selectors.selectCartProducts),a=f(u.selectors.selectCartCount),i=f(u.selectors.selectCartTotalPrice),[o,{open:c,close:l}]=M(!1),n=F({mode:"uncontrolled",initialValues:{name:"",phone:"",email:""},validate:{name:s=>s.length<1?"Required Field":null,phone:s=>s.length<1?"Required Field":null,email:s=>/^\S+@\S+$/.test(s)?null:"Invalid email"}});return e.jsxs(e.Fragment,{children:[e.jsxs(p,{component:"section",children:[e.jsx(R,{my:40,title:"Shopping Cart",href:"/products",linkLabel:"Back to the store"}),!a&&e.jsx(L,{}),e.jsxs(m,{gap:32,align:"start",children:[r==null?void 0:r.map(s=>j.createElement(E,{...s,key:s.id,increment:s.count??1,setDecrement:()=>t(u.actions.removeCurrentProduct(s.id)),setIncrement:()=>t(u.actions.addProductToCart({...s,count:(s.count??0)+1})),removeAllProducts:()=>t(u.actions.removeAllSameProductsFromCart(s.id))})),e.jsxs(S,{w:"100%",maw:548,bg:"gray.1",p:32,radius:"sm",display:a===0?"none":"block",children:[e.jsx(G,{count:a,total:i}),e.jsx(p,{component:"form",onSubmit:n.onSubmit(s=>{c(),console.log({values:s})},s=>{console.log(s)}),children:e.jsxs(b,{gap:16,children:[e.jsx(g,{size:"lg",placeholder:"Name",...n.getInputProps("name")},n.key("name")),e.jsx(g,{size:"lg",placeholder:"Phone number",...n.getInputProps("phone")},n.key("phone")),e.jsx(g,{size:"lg",placeholder:"Email",...n.getInputProps("email")},n.key("email")),e.jsx(w,{type:"submit",mt:16,bg:o?"white":"green",c:o?"green":"white",size:"lg",children:o?"The order is Placed":"Order"})]})})]})]})]}),e.jsx(D,{close:l,opened:o})]})};function K(){return e.jsxs($,{title:"Cart",children:[e.jsx(v,{mb:90,children:e.jsx(O,{})}),e.jsx(B,{})]})}export{K as default};
