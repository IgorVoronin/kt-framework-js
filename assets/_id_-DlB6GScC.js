import{j as s,B as l,o as j,u as x,p as i,r as d,A as p,C as f}from"./index-C4oQiuMV.js";import{c as C}from"./calculateDiscount-Bk2neCmW.js";import{F as g,I as b,T as w,G as h,b as o,B as P,R as A,C as T}from"./index-CnsDO8Kd.js";import{S as y}from"./Stack-BBJdau8K.js";import{C as D}from"./index-CX2oQ_25.js";const I=({image:e,title:a,discont_price:t,price:n,description:r,addToCartSlot:c})=>s.jsx(l,{children:s.jsxs(g,{gap:32,children:[s.jsx(b,{radius:"lg",maw:780,mah:572,w:"100%",h:"100%",src:e,alt:a}),s.jsxs(y,{children:[s.jsx(w,{fz:40,mb:32,lh:1,children:a}),s.jsxs(h,{gap:32,align:"baseline",children:[s.jsxs(o,{lh:1,fz:64,fw:"bold",children:["$",t??n]}),s.jsxs(l,{hidden:!t,pos:"relative",children:[s.jsxs(o,{pos:"absolute",top:-24,right:-64,bg:"green",c:"white",py:4,px:8,style:{borderRadius:6},fw:600,fz:20,lh:"26px",children:["-",C({price:n??0,discountPrice:t??0}),"%"]}),s.jsxs(o,{fz:40,lh:1,td:"line-through",c:"gray",hidden:!t,children:["$",n]})]})]}),c,s.jsx(o,{fw:"bold",children:"Description"}),s.jsx(o,{children:r})]})]})}),S=({product:e})=>{const a=j(),t=x(m=>i.selectors.selectCurrentProductFromCart(m,e.id)),[n,r]=d.useState(()=>(t==null?void 0:t.count)??0);d.useEffect(()=>{r((t==null?void 0:t.count)??0)},[e]);const c=()=>r(()=>n+1),u=()=>r(()=>n-1);return s.jsxs(h,{my:32,children:[s.jsx(D,{increment:n,setIncrement:c,setDecrement:u}),s.jsx(P,{flex:1,maw:316,radius:"xxs",onClick:()=>a(i.actions.addProductToCart({...e,count:n})),children:"Add to Cart"})]})};function k(){const e=x(p.selectors.selectCurrentProduct);return e?s.jsx(A,{title:`${e==null?void 0:e.title}`,children:s.jsxs(f,{children:[s.jsx(l,{component:"section",mt:116,mb:80,children:s.jsx(I,{...e,addToCartSlot:s.jsx(S,{product:e})})}),s.jsx(T,{})]})}):null}export{k as default};
