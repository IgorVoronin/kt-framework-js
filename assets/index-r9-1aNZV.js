import{r as j,j as e,B as p,n as y,L as k,M as h,o as z,u as g,p as u,q as P,C as S}from"./index-WIeyn-6h.js";import{C as v}from"./index-CFtly5LM.js";import{G as m,I as T,T as C,A as I,b as d,B as w,c as R,R as A,C as B}from"./index-UwObzZgI.js";import{S as b}from"./Stack-zIDc7CfN.js";import{u as F}from"./use-form-EoQVJLjW.js";import{T as f}from"./TextInput-CRLtXwfY.js";function M(t=!1,r){const{onOpen:l,onClose:i}={},[o,c]=j.useState(t),a=j.useCallback(()=>{c(x=>x||(l==null||l(),!0))},[l]),n=j.useCallback(()=>{c(x=>x&&(i==null||i(),!1))},[i]),s=j.useCallback(()=>{o?n():a()},[n,a,o]);return[o,{open:a,close:n,toggle:s}]}const $=({title:t,image:r,increment:l,discont_price:i,price:o,setIncrement:c,setDecrement:a,removeAllProducts:n})=>e.jsx(p,{w:"100%",maw:780,mih:180,style:{overflow:"hidden",border:"1px solid var(--mantine-color-gray-3)",borderRadius:12},children:e.jsxs(m,{w:"100%",wrap:"nowrap",children:[e.jsx(p,{style:{borderRight:"1px solid var(--mantine-color-gray-3)"},children:e.jsx(T,{maw:200,mah:180,src:r})}),e.jsxs(b,{gap:32,p:32,w:"100%",flex:1,children:[e.jsxs(m,{gap:0,justify:"space-between",w:"100%",children:[e.jsx(C,{fz:20,children:t}),e.jsx(I,{onClick:n,ml:"auto",variant:"transparent",c:"black",children:e.jsx(y,{})})]}),e.jsxs(m,{gap:32,children:[e.jsx(v,{increment:l,setIncrement:c,setDecrement:a}),e.jsxs(m,{align:"baseline",children:[e.jsxs(d,{fz:40,lh:1,fw:600,children:["$",i??o]}),e.jsxs(d,{c:"gray",td:"line-through",fz:20,hidden:!i,children:["$",o]})]})]})]})]})}),D=()=>e.jsxs(b,{gap:32,w:"fit-content",children:[e.jsx(d,{fz:20,fw:500,children:"Looks like you have no items in your basket currently."}),e.jsx(w,{w:"fit-content",size:"lg",bg:"green.8",radius:"xs",component:k,to:"/",children:"Continue Shopping"})]}),E=({opened:t,close:r})=>e.jsxs(h.Root,{centered:!0,opened:t,onClose:r,children:[e.jsx(h.Overlay,{}),e.jsxs(h.Content,{children:[e.jsxs(h.Header,{bg:"green.9",c:"white",children:[e.jsx(h.Title,{fw:500,fz:40,children:"Congratulations!"}),e.jsx(h.CloseButton,{c:"white",size:"xl"})]}),e.jsxs(h.Body,{c:"white",bg:"green.9",children:[e.jsx(d,{fz:20,lh:1,fw:500,children:"Your order has been successfully placed on the website."}),e.jsx("br",{}),e.jsx(d,{fz:20,lh:1,fw:500,children:"A manager will contact you shortly to confirm your order."})]})]})]}),L=({count:t,few:r,many:l,one:i,withoutCount:o})=>{const c=Math.round(t)!==t;let a=l;if(c)a=r;else{const n=Math.abs(t%10),s=Math.abs(t%100);n===1&&s!==11?a=i:2<=n&&n<=4&&(s<10||20<=s)&&(a=r)}return o?`${a}`:`${t}Â ${a}`},q=({count:t,total:r})=>e.jsxs(p,{mb:32,children:[e.jsx(C,{mb:24,fz:40,children:"Order details"}),e.jsx(d,{c:"gray",fz:40,fw:500,children:L({count:t,one:"item",few:"items",many:"items"})}),e.jsxs(m,{justify:"space-between",align:"baseline",children:[e.jsx(d,{c:"gray",fz:40,fw:500,children:"Total"}),e.jsxs(d,{fw:700,fz:64,lh:1,children:["$",r.toFixed(2)]})]})]}),G=()=>{const t=z(),r=g(u.selectors.selectCartProducts),l=g(u.selectors.selectCartCount),i=g(u.selectors.selectCartTotalPrice),[o,{open:c,close:a}]=M(!1),n=F({mode:"uncontrolled",initialValues:{name:"",phone:"",email:""},validate:{name:s=>s.length<1?"Required Field":null,phone:s=>s.length<1?"Required Field":null,email:s=>/^\S+@\S+$/.test(s)?null:"Invalid email"}});return e.jsxs(e.Fragment,{children:[e.jsxs(p,{component:"section",children:[e.jsx(R,{my:40,title:"Shopping Cart",href:"/products",linkLabel:"Back to the store"}),!l&&e.jsx(D,{}),e.jsxs(m,{gap:32,align:"start",children:[r==null?void 0:r.map(s=>j.createElement($,{...s,key:s.id,increment:s.count??1,setDecrement:()=>t(u.actions.removeCurrentProduct(s.id)),setIncrement:()=>t(u.actions.addProductToCart({...s,count:(s.count??0)+1})),removeAllProducts:()=>t(u.actions.removeAllSameProductsFromCart(s.id))})),e.jsxs(P,{w:"100%",maw:548,bg:"gray.1",p:32,radius:"sm",display:l===0?"none":"block",children:[e.jsx(q,{count:l,total:i}),e.jsx(p,{component:"form",onSubmit:n.onSubmit(s=>{c(),console.log({values:s})},s=>{console.log(s)}),children:e.jsxs(b,{gap:16,children:[e.jsx(f,{size:"lg",placeholder:"Name",...n.getInputProps("name")},n.key("name")),e.jsx(f,{size:"lg",placeholder:"Phone number",...n.getInputProps("phone")},n.key("phone")),e.jsx(f,{size:"lg",placeholder:"Email",...n.getInputProps("email")},n.key("email")),e.jsx(w,{type:"submit",mt:16,bg:o?"white":"green",c:o?"green":"white",size:"lg",children:o?"The order is Placed":"Order"})]})})]})]})]}),e.jsx(E,{close:a,opened:o})]})};function K(){return e.jsxs(A,{title:"Cart",children:[e.jsx(S,{mb:90,children:e.jsx(G,{})}),e.jsx(B,{})]})}export{K as default};
